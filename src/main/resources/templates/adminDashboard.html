<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard | Vistaseat.com</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/adminStyle.css}">
    <script th:src="@{/js/admin.js}" defer></script>
</head>
<body>

    <!-- Include Header-->
    <div th:replace="fragments/adminHeader :: adminHeader(${firstName}, ${lastName})"></div>

    <!-- Admin Dashboard - CSS Grid Container -->
    <div class="dashboard-layout">
        <!-- Include Admin Sidebar-->
        <div th:replace="fragments/adminSidebar :: adminSidebar ('adminDashboard')"></div>

        <!-- Section 1 - Item Cards -->
        <section class="dashboard-cards">
            <div class="card">
                <div class="d-flex align-items-center mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-people-fill me-2" viewBox="0 0 16 16">
                        <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
                    </svg>
                    <span> System Users</span>
                </div>
                <span th:text="${totalUsers}"></span>
                <a href="/adminDashboard/manageUsers" class="manage-button" role="button"><img src="/images/gear.svg" alt="manage button"></a>
                <span class="tooltip-text">Manage Users</span>
            </div>
            <div class="card">
                <div class="d-flex align-items-center mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-calendar3 me-2" viewBox="0 0 16 16">
                        <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2M1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857z"/>
                        <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
                    </svg>
                    <span> Total Events</span>
                </div>
                <span th:text="${totalEvents}"></span>
                <a href="/adminDashboard/manageEvents" class="manage-button" role="button"><img src="/images/gear.svg" alt="manage button"></a>
                <span class="tooltip-text">Manage Events</span>
            </div>
            <div class="card">
                <div class="d-flex align-items-center mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-buildings-fill me-2" viewBox="0 0 16 16">
                        <path d="M15 .5a.5.5 0 0 0-.724-.447l-8 4A.5.5 0 0 0 6 4.5v3.14L.342 9.526A.5.5 0 0 0 0 10v5.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V14h1v1.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5zM2 11h1v1H2zm2 0h1v1H4zm-1 2v1H2v-1zm1 0h1v1H4zm9-10v1h-1V3zM8 5h1v1H8zm1 2v1H8V7zM8 9h1v1H8zm2 0h1v1h-1zm-1 2v1H8v-1zm1 0h1v1h-1zm3-2v1h-1V9zm-1 2h1v1h-1zm-2-4h1v1h-1zm3 0v1h-1V7zm-2-2v1h-1V5zm1 0h1v1h-1z"/>
                    </svg>
                    <span> Total Venues</span>
                </div>
                <span th:text="${totalVenues}"></span>
                <a href="/adminDashboard/manageVenues" class="manage-button" role="button"><img src="/images/gear.svg" alt="manage button"></a>
                <span class="tooltip-text">Manage Venues</span>
            </div>
            <div class="card">
                <div class="d-flex align-items-center mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-ticket-detailed me-2" viewBox="0 0 16 16">
                        <path d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5M5 7a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2z"/>
                        <path d="M0 4.5A1.5 1.5 0 0 1 1.5 3h13A1.5 1.5 0 0 1 16 4.5V6a.5.5 0 0 1-.5.5 1.5 1.5 0 0 0 0 3 .5.5 0 0 1 .5.5v1.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 11.5V10a.5.5 0 0 1 .5-.5 1.5 1.5 0 1 0 0-3A.5.5 0 0 1 0 6zM1.5 4a.5.5 0 0 0-.5.5v1.05a2.5 2.5 0 0 1 0 4.9v1.05a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-1.05a2.5 2.5 0 0 1 0-4.9V4.5a.5.5 0 0 0-.5-.5z"/>
                    </svg>
                    <span> Total Bookings</span>
                </div>
                <span th:text="${totalBookings}"></span>
                <a href="#" class="manage-button" role="button"><img src="/images/gear.svg" alt="manage button"></a>
                <span class="tooltip-text">Manage Bookings</span>
            </div>
            <div class="card revenue">
                <div class="d-flex align-items-center mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cash-stack me-2" viewBox="0 0 16 16">
                        <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
                        <path d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2z"/>
                    </svg>
                    <span> Total Revenue</span>
                </div>
                <br>
                <span th:text="${totalRevenue} + ' €'"></span>
            </div>
            <div class="history-section">
            </div>
        </section>

        <!-- Section 2 - Recent History   -->
        <section class="history">
            <h2>Recent History</h2>
            <div class="tabs">
                <button class="tab-button active" onclick="openTab(this, 'registrations')">Registrations</button>
                <button class="tab-button" onclick="openTab(this, 'bookings')">Bookings</button>
            </div>
            <div class="tab-content" id="registrations">
                <table>
                    <thead>
                    <tr>
                        <th>First Name</th><th>Last Name</th><th>Email</th><th>Registration Date & Time</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="user : ${recentUsers}">
                        <td th:text="${user.firstName}">Jane</td>
                        <td th:text="${user.lastName}">Doe</td>
                        <td th:text="${user.email}">jane@example.com</td>
                        <td th:text="${#temporals.format(user.registrationDate, 'EEEE, MMM d, yyyy • h:mm a')}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="tab-content" id="bookings" style="display:none;">
                <table>
                    <thead>
                    <tr class="text-nowrap">
                        <th>ID</th>
                        <th>Date</th>
                        <th>Event Name</th>
                        <th>User Email</th>
                        <th>No of Tickets</th>
                        <th>Total Price</th>
                        <th>Status</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="booking : ${recentBookings}">
                        <td th:text="${booking.id}">123</td>
                        <td th:text="${#temporals.format(booking.bookingDate, 'EEE, MMM d, yyyy • h:mm a')}">Saturday, Sep 13, 2025 • 1:20 PM</td>
                        <td th:text="${booking.eventName}"></td>
                        <td th:text="${booking.email}"></td>
                        <td th:text="${booking.numberOfTickets}"></td>
                        <td th:text="${booking.totalAmount} + ' €'"></td>
                        <td th:text="${booking.status}">Confirmed</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- Include Footer-->
    <div th:replace="fragments/adminFooter :: footer"></div>
</body>
</html>